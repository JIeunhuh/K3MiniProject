{"ast":null,"code":"var _jsxFileName = \"C:\\\\MiniProject\\\\project_front\\\\my_mini_project\\\\src\\\\project\\\\Mymap.js\",\n  _s = $RefreshSig$();\n// search - map 표시 \n// react-kakao-maps-sdk\nimport { Map, MapMarker } from \"react-kakao-maps-sdk\";\nimport { useState, useEffect, useRef } from 'react';\nimport style from './Food.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Mymap = ({\n  searchRes\n}) => {\n  _s();\n  // 위치 표시하기 위한 useRef\n  const mapRef = useRef({\n    markers: []\n  }); //빈 배열로 초기화\n\n  // 마커 표시\n  const [desMarkers, setMarkers] = useState([]);\n\n  //바뀌는 마커의 상태를 저장\n  const [saveMarker, setSaveMarker] = useState();\n\n  // 위치 표시\n  const [state, setState] = useState({\n    center: {\n      lat: 33.450701,\n      lng: 126.570667\n    },\n    errMsg: null,\n    isLoading: true\n  });\n\n  // 마커의 위치 저장\n  const selectMarker = () => {\n    setSaveMarker(mapRef.current.value);\n  };\n\n  // useEffect(() =>{\n  //     if(navigator.geolocation){\n  //         navigator.geolocation.getCurrentPosition(\n  //             (position) => {\n  //                 const {latitude, longitude} = position.coords;\n  //                 setState((prev) =>({\n  //                     ...prev,\n  //                     center:{\n  //                         lat : latitude,\n  //                         lng : longitude,\n  //                     },\n  //                     isLoading:false,\n  //                 }));\n  //             },\n  //         (err) => {\n  //             setState((prev)=>({\n  //                 ...prev,\n  //                 errMsg : err.message,\n  //                 isLoading: false,\n  //             }));\n  //         }\n  //             );\n  //     }\n  //     else{\n  //         setState((prev)=>({\n  //             ...prev,\n  //             errMsg: 'geolocation 사용불가',\n  //             isLoading: false\n  //         }));\n  //     }\n  // },[]);\n\n  // searchRef object에 있는 주소를 좌표로 변환하고 마커 추가\n  useEffect(() => {\n    //주소-좌표간 변환 서비스 객체를 생성한다.\n    const geocoder = new window.kakao.maps.services.Geocoder();\n\n    // 이전 마커를 삭제하기 위해 현재 마커를 변수에 저장\n    const prevMarkers = desMarkers;\n\n    //searchRes에 있는 각 식당의주소 좌표로 변환하고 마커 표시\n    const updateMark = searchRes.map(item => {\n      const fullAddr = item.city + item.city_gu + item.city_dong + item.city_address;\n      geocoder.addressSearch(fullAddr, (result, status) => {\n        if (status == window.kakao.maps.services.Status.OK) {\n          const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\n          const marker = new window.kakao.maps.Marker({\n            position: coords\n          });\n          marker.setMap(mapRef.current);\n          // mapRef.current.markers.push(marker);\n        }\n      });\n    });\n\n    //마커들을 상태에 저장하고 지도에 추가\n    setMarkers(updateMark);\n    updateMark.forEach(marker => marker.setMap(saveMarker));\n\n    //이전 마커를 삭제\n    prevMarkers.forEach(marker => marker.setMap(null));\n  }, [searchRes]);\n\n  // 검색결과가 있을 때, 첫 번째 음식점의 좌표를 가져오기\n  const firstAddr = searchRes[0].city + searchRes[0].city_gu + searchRes[0].city_dong + searchRes[0].city_address;\n  geocoder.addressSearch(firstAddr, (result, status) => {\n    if (status === window.kakao.maps.services.Status.OK) {\n      const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\n      setState({\n        lat: coords.getLat(),\n        lng: coords.getLng()\n      });\n    }\n  });\n  console.log(desMarkers);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${style.kakaoMap}`,\n    children: /*#__PURE__*/_jsxDEV(Map, {\n      ref: mapRef,\n      onChange: selectMarker // 지도를 표시할 Container\n      ,\n      center: state,\n      style: {\n        // 지도의 크기\n        width: \"650px\",\n        height: \"550px\"\n      },\n      level: 3 // 지도의 확대 레벨\n      ,\n      children: /*#__PURE__*/_jsxDEV(MapMarker, {\n        position: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n};\n_s(Mymap, \"kwG0pbkLkXW6YC5o/IgVKPTF2x0=\");\n_c = Mymap;\nexport default Mymap;\nvar _c;\n$RefreshReg$(_c, \"Mymap\");","map":{"version":3,"names":["Map","MapMarker","useState","useEffect","useRef","style","jsxDEV","_jsxDEV","Mymap","searchRes","_s","mapRef","markers","desMarkers","setMarkers","saveMarker","setSaveMarker","state","setState","center","lat","lng","errMsg","isLoading","selectMarker","current","value","geocoder","window","kakao","maps","services","Geocoder","prevMarkers","updateMark","map","item","fullAddr","city","city_gu","city_dong","city_address","addressSearch","result","status","Status","OK","coords","LatLng","y","x","marker","Marker","position","setMap","forEach","firstAddr","getLat","getLng","console","log","className","kakaoMap","children","ref","onChange","width","height","level","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/MiniProject/project_front/my_mini_project/src/project/Mymap.js"],"sourcesContent":["// search - map 표시 \r\n// react-kakao-maps-sdk\r\nimport { Map, MapMarker } from \"react-kakao-maps-sdk\";\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport style from './Food.module.css';\r\n\r\nconst Mymap = ({ searchRes }) => {\r\n    // 위치 표시하기 위한 useRef\r\n    const mapRef = useRef({ markers: [] }); //빈 배열로 초기화\r\n\r\n    // 마커 표시\r\n    const [desMarkers, setMarkers] = useState([]);\r\n\r\n    //바뀌는 마커의 상태를 저장\r\n    const [saveMarker, setSaveMarker] = useState();\r\n\r\n    // 위치 표시\r\n    const [state, setState] = useState({\r\n        center: {\r\n            lat: 33.450701,\r\n            lng: 126.570667,\r\n        },\r\n        errMsg: null,\r\n        isLoading: true,\r\n    });\r\n\r\n    // 마커의 위치 저장\r\n    const selectMarker = () => {\r\n        setSaveMarker(mapRef.current.value);\r\n    }\r\n\r\n    // useEffect(() =>{\r\n    //     if(navigator.geolocation){\r\n    //         navigator.geolocation.getCurrentPosition(\r\n    //             (position) => {\r\n    //                 const {latitude, longitude} = position.coords;\r\n    //                 setState((prev) =>({\r\n    //                     ...prev,\r\n    //                     center:{\r\n    //                         lat : latitude,\r\n    //                         lng : longitude,\r\n    //                     },\r\n    //                     isLoading:false,\r\n    //                 }));\r\n    //             },\r\n    //         (err) => {\r\n    //             setState((prev)=>({\r\n    //                 ...prev,\r\n    //                 errMsg : err.message,\r\n    //                 isLoading: false,\r\n    //             }));\r\n    //         }\r\n    //             );\r\n    //     }\r\n    //     else{\r\n    //         setState((prev)=>({\r\n    //             ...prev,\r\n    //             errMsg: 'geolocation 사용불가',\r\n    //             isLoading: false\r\n    //         }));\r\n    //     }\r\n    // },[]);\r\n\r\n    // searchRef object에 있는 주소를 좌표로 변환하고 마커 추가\r\n    useEffect(() => {\r\n        //주소-좌표간 변환 서비스 객체를 생성한다.\r\n        const geocoder = new window.kakao.maps.services.Geocoder();\r\n\r\n        // 이전 마커를 삭제하기 위해 현재 마커를 변수에 저장\r\n        const prevMarkers = desMarkers\r\n\r\n        //searchRes에 있는 각 식당의주소 좌표로 변환하고 마커 표시\r\n        const updateMark = searchRes.map((item) => {\r\n            const fullAddr = item.city + item.city_gu + item.city_dong + item.city_address;\r\n            geocoder.addressSearch(fullAddr, (result, status) => {\r\n                if (status == window.kakao.maps.services.Status.OK) {\r\n                    const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\r\n                    const marker = new window.kakao.maps.Marker({\r\n                        position: coords,\r\n                    });\r\n                    marker.setMap(mapRef.current);\r\n                    // mapRef.current.markers.push(marker);\r\n                }\r\n            });\r\n        });\r\n\r\n        //마커들을 상태에 저장하고 지도에 추가\r\n        setMarkers(updateMark);\r\n        updateMark.forEach((marker) => marker.setMap(saveMarker));\r\n\r\n        //이전 마커를 삭제\r\n        prevMarkers.forEach((marker) => marker.setMap(null));\r\n\r\n    }, [searchRes]);\r\n\r\n    // 검색결과가 있을 때, 첫 번째 음식점의 좌표를 가져오기\r\n    const firstAddr = searchRes[0].city + searchRes[0].city_gu + searchRes[0].city_dong + searchRes[0].city_address;\r\n    geocoder.addressSearch(firstAddr, (result, status) => {\r\n        if (status === window.kakao.maps.services.Status.OK) {\r\n            const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\r\n            setState({\r\n                lat: coords.getLat(),\r\n                lng: coords.getLng(),\r\n            });\r\n        }\r\n    });\r\n\r\n    console.log(desMarkers);\r\n    return (\r\n        <div className={`${style.kakaoMap}`}>\r\n            <Map ref={mapRef} onChange={selectMarker}// 지도를 표시할 Container\r\n                center={state}\r\n                style={{\r\n                    // 지도의 크기\r\n                    width: \"650px\",\r\n                    height: \"550px\",\r\n                }}\r\n                level={3} // 지도의 확대 레벨\r\n            >\r\n                <MapMarker position={state} />\r\n            </Map>\r\n        </div>\r\n    );\r\n}\r\nexport default Mymap;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}